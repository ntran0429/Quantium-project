"0","#### Deep dive into Mainstream, young singles/couples"
"0",""
"0","# Are there brands that these this customer segment prefers"
"0","# more than others. "
"0","# Could use affinity analysis or apriori analysis"
"0",""
"0",""
"0","# 'data' is a transactional data set where each row is a transaction"
"0",""
"0",""
"0","# affinity analysis"
"0",""
"0","# subset two relevant groups to compare"
"0","# this is the segment of interest"
"0","segment1 <- data[PREMIUM_CUSTOMER == ""Mainstream"" &"
"0","                 LIFESTAGE == ""YOUNG SINGLES/COUPLES"", ]"
"0","# the rest of population serves as the baseline comparison"
"0","Other <- data[!(PREMIUM_CUSTOMER == ""Mainstream"" &"
"0","                 LIFESTAGE == ""YOUNG SINGLES/COUPLES""), ]"
"0",""
"0","# how many units did segment1 buy?"
"0","quantity_segment1 <- segment1[, sum(PROD_QTY)]"
"0","# how many units did the rest buy?"
"0","quantity_other <- Other[, sum(PROD_QTY)]"
"0",""
"0","# calculate proportion that bought a specific brand by segment1"
"0","quantity_segment1_byBrand <- segment1[, .(TargetSeg = sum(PROD_QTY)/quantity_segment1), by = BRAND]"
"0","# calculate proportion that bought a specific brand by the rest of the population"
"0","quantity_Other_byBrand <- Other[, .(otherSegs = sum(PROD_QTY)/quantity_other), by = BRAND]"
"0",""
"0","# calculate and compare to see which brands segment1 particularly tends to buy compared to other segments."
"0","brand_proportions <- merge(quantity_segment1_byBrand,quantity_Other_byBrand)[, AffinityToBrand := TargetSeg/otherSegs] "
"0","brand_proportions[order(-AffinityToBrand)]"
